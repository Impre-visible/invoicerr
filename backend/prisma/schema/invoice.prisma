model Invoice {
  id                 String            @id @default(uuid())
  number             Int               @default(autoincrement())
  rawNumber          String? // Raw number for custom formats
  quote              Quote?            @relation(fields: [quoteId], references: [id])
  quoteId            String?
  recurringInvoice   RecurringInvoice? @relation(fields: [recurringInvoiceId], references: [id])
  recurringInvoiceId String?
  client             Client            @relation(fields: [clientId], references: [id]) // Client receiving the invoice
  clientId           String
  company            Company           @relation(fields: [companyId], references: [id]) // Company issuing the invoice
  companyId          String
  items              InvoiceItem[]
  status             InvoiceStatus     @default(UNPAID)
  createdAt          DateTime          @default(now())
  updatedAt          DateTime          @updatedAt
  dueDate            DateTime
  paidAt             DateTime?
  paymentMethod      String? // Ex: "Bank Transfer", "PayPal", "Cash"
  paymentDetails     String? // Details for the payment method (e.g., bank account number)
  notes              String?           @default("")
  totalHT            Float
  totalVAT           Float
  totalTTC           Float
  currency           Currency
  isActive           Boolean           @default(true)
  receipts           Receipt[]
}

model InvoiceItem {
  id           String        @id @default(uuid())
  invoice      Invoice       @relation(fields: [invoiceId], references: [id])
  invoiceId    String
  description  String
  quantity     Int
  unitPrice    Float
  vatRate      Float // 20 for 20%
  order        Int
  receiptItems ReceiptItem[]
}